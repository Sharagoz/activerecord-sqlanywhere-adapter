Using sqlanywhere
Run options: --seed 50754

# Running tests:

.............SSS...............................................................SSSS...................................................................................................................................................S..SSSSSSS.....................................S.....................................................S................................................................SSSSSS............................................................................................................................................................................................................................................................................................................................................................................................................................................................................F.F..........S..........................................................................................................F.F.....F.............F..................................................................................................................................................................................................................F..................................................................................................................................F...............................................F.F...................................F.F...................F..................................................................F.....E...................................................F......................................F...............................................................................................E.........................E..................................................................................F..............................................................................................................................F...F..................................................................................................................................................................................................................................................................................................................................................................F.S......S.S..................................................E.......................................................................FF....................................................................................................................................F...........................................................................F..................................................................................................................................................................................................................................................E........E.E..............................................................................................................................................................................................................................................................................................................................................................................................................SSSSSS...........................................E....................................

Finished tests in 357.632278s, 9.4846 tests/s, 27.0278 assertions/s.

  1) Failure:
test_preserving_time_objects_with_time_with_zone_conversion_to_default_timezone_local(BasicsTest) [/home/chris/Documents/rails/activerecord/test/cases/base_test.rb:279]:
--- expected
+++ actual
@@ -1 +1 @@
-Sat, 01 Jan 2000 00:00:00 CST -06:00
+2000-01-01 06:00:00 -0500


  2) Failure:
test_preserving_time_objects_with_utc_time_conversion_to_default_timezone_local(BasicsTest) [/home/chris/Documents/rails/activerecord/test/cases/base_test.rb:266]:
Expected: 2000-01-01 00:00:00 UTC
  Actual: 2000-01-01 00:00:00 -0500

  3) Failure:
test_limit_is_kept(CalculationsTest) [/home/chris/Documents/rails/activerecord/test/cases/calculations_test.rb:137]:
Expected /LIMIT/ to match "SELECT COUNT(count_column) FROM (SELECT TOP (1) 1 AS count_column FROM \"accounts\" ) subquery_for_count ".

  4) Failure:
test_limit_with_offset_is_kept(CalculationsTest) [/home/chris/Documents/rails/activerecord/test/cases/calculations_test.rb:153]:
Expected /LIMIT/ to match "SELECT COUNT(count_column) FROM (SELECT TOP (1) START AT (2) 1 AS count_column FROM \"accounts\" ) subquery_for_count ".

  5) Failure:
test_offset_is_kept(CalculationsTest) [/home/chris/Documents/rails/activerecord/test/cases/calculations_test.rb:145]:
Expected /OFFSET/ to match "SELECT COUNT(count_column) FROM (SELECT TOP (2147483647) START AT (2) 1 AS count_column FROM \"accounts\" ) subquery_for_count ".

  6) Failure:
test_pluck_with_selection_clause(CalculationsTest) [/home/chris/Documents/rails/activerecord/test/cases/calculations_test.rb:532]:
Expected: [50, 53, 55, 60]
  Actual: [50, 50, 50, 53, 55, 60]

  7) Failure:
test_should_serialize_datetime_with_timezone_reloaded(DefaultXmlSerializationTimezoneTest) [/home/chris/Documents/rails/activerecord/test/cases/xml_serialization_test.rb:176]:
Expected /<updated-at type=\"dateTime\">2006-07-31T17:00:00-07:00<\/updated-at>/ to match "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<toy>\n  <toy-id type=\"integer\">3</toy-id>\n  <name>Minnie</name>\n  <pet-id type=\"integer\" nil=\"true\"/>\n  <integer type=\"integer\" nil=\"true\"/>\n  <created-at type=\"dateTime\">2012-11-25T10:05:35-08:00</created-at>\n  <updated-at type=\"dateTime\">2006-07-31T16:00:00-07:00</updated-at>\n</toy>\n".

  8) Failure:
test_count_eager_with_has_many_and_limit_and_high_offset(EagerAssociationTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/eager_test.rb:579]:
Expected: 0
  Actual: 1

  9) Failure:
test_eager_with_has_many_and_limit_and_conditions_array_on_the_eagers(EagerAssociationTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/eager_test.rb:547]:
Expected: 2
  Actual: 1

 10) Failure:
test_eager_with_has_many_and_limit_and_high_offset(EagerAssociationTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/eager_test.rb:557]:
Expected: 0
  Actual: 1

 11) Failure:
test_limited_eager_with_multiple_order_columns(EagerAssociationTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/eager_test.rb:798]:
--- expected
+++ actual
@@ -1 +1 @@
-[#<StiPost id: 5, author_id: 1, title: "sti me", body: "hello", type: "StiPost", comments_count: 0, taggings_count: 0, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 0, tags_with_destroy_count: 0, tags_with_nullify_count: 0>, #<Post id: 4, author_id: 1, title: "sti comments", body: "hello", type: "Post", comments_count: 0, taggings_count: 0, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 0, tags_with_destroy_count: 0, tags_with_nullify_count: 0>]
+[#<Post id: 1, author_id: 1, title: "Welcome to the weblog", body: "Such a lovely day", type: "Post", comments_count: 2, taggings_count: 1, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 1, tags_with_destroy_count: 0, tags_with_nullify_count: 0>, #<StiPost id: 5, author_id: 1, title: "sti me", body: "hello", type: "StiPost", comments_count: 0, taggings_count: 0, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 0, tags_with_destroy_count: 0, tags_with_nullify_count: 0>]


 12) Failure:
test_limited_eager_with_order(EagerAssociationTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/eager_test.rb:781]:
--- expected
+++ actual
@@ -1 +1 @@
-[#<StiPost id: 5, author_id: 1, title: "sti me", body: "hello", type: "StiPost", comments_count: 0, taggings_count: 0, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 0, tags_with_destroy_count: 0, tags_with_nullify_count: 0>, #<Post id: 4, author_id: 1, title: "sti comments", body: "hello", type: "Post", comments_count: 0, taggings_count: 0, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 0, tags_with_destroy_count: 0, tags_with_nullify_count: 0>]
+[#<Post id: 1, author_id: 1, title: "Welcome to the weblog", body: "Such a lovely day", type: "Post", comments_count: 2, taggings_count: 1, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 1, tags_with_destroy_count: 0, tags_with_nullify_count: 0>, #<StiPost id: 5, author_id: 1, title: "sti me", body: "hello", type: "StiPost", comments_count: 0, taggings_count: 0, taggings_with_delete_all_count: 0, taggings_with_destroy_count: 0, tags_count: 0, tags_with_destroy_count: 0, tags_with_nullify_count: 0>]


 13) Failure:
test_order_on_join_table_with_include_and_limit(EagerAssociationTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/eager_test.rb:948]:
Expected: 5
  Actual: 4

 14) Failure:
test_exists_does_not_select_columns_without_alias(FinderTest) [/home/chris/Documents/rails/activerecord/test/cases/finder_test.rb:49]:
Query pattern(s) /SELECT\W+1 AS one FROM ["`]topics["`]/i not found.
Queries:
SELECT TOP (1) 1 AS one FROM "topics" 

 15) Error:
test_exists_with_includes_limit_and_empty_result(FinderTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionAdapters::SQLAnywhereException: Statement's size limit is invalid: SELECT TOP (0) "topics".id FROM "topics" LEFT OUTER JOIN "topics" "replies_topics" ON "replies_topics"."parent_id" = "topics"."id" AND "replies_topics"."type" IN ('Reply', 'UniqueReply', 'WrongReply', 'SillyReply', 'SpecialReply', 'ReplyWithTitleObject', 'SillyUniqueReply')
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:286:in `sqlanywhere_error'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:281:in `sqlanywhere_error_test'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:533:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:462:in `select'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:39:in `block in find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:38:in `find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:568:in `exec_queries'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `block in load'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `load'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:197:in `to_a'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation/delegation.rb:5:in `collect'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation/finder_methods.rb:230:in `construct_limited_ids_condition'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation/finder_methods.rb:215:in `apply_join_dependency'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation/finder_methods.rb:204:in `construct_relation_for_association_find'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation/finder_methods.rb:164:in `exists?'
    /home/chris/Documents/rails/activerecord/test/cases/finder_test.rb:77:in `test_exists_with_includes_limit_and_empty_result'

 16) Failure:
test_find_with_order_on_included_associations_with_construct_finder_sql_for_association_limiting_and_is_distinct(FinderTest) [/home/chris/Documents/rails/activerecord/test/cases/finder_test.rb:776]:
Expected: 2
  Actual: 1

 17) Failure:
test_take_and_first_and_last_with_integer_should_use_sql_limit(FinderTest) [/home/chris/Documents/rails/activerecord/test/cases/finder_test.rb:241]:
Query pattern(s) /LIMIT 3|ROWNUM <= 3/ not found.
Queries:
SELECT TOP (3) "topics".* FROM "topics" 

 18) Error:
test_count_with_finder_sql(HasAndBelongsToManyAssociationsTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionAdapters::SQLAnywhereException: Function or column reference to 'id' in the ORDER BY clause is invalid: SELECT COUNT(*) FROM developers_projects j, developers t WHERE t.id = j.developer_id AND j.project_id = 1 ORDER BY t.id
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:286:in `sqlanywhere_error'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:281:in `sqlanywhere_error_test'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:533:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:462:in `select'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:30:in `select_one'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:36:in `select_value'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:66:in `block in count_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:64:in `count_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/associations/collection_association.rb:184:in `count'
    /home/chris/Documents/rails/activerecord/lib/active_record/associations/collection_proxy.rb:671:in `count'
    /home/chris/Documents/rails/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb:810:in `test_count_with_finder_sql'

 19) Error:
test_find_scoped_grouped_having(HasAndBelongsToManyAssociationsTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionAdapters::SQLAnywhereException: Invalid expression near 'SUM': SELECT SUM(salary) as salary FROM "developers" INNER JOIN "developers_projects" ON "developers"."id" = "developers_projects"."developer_id" WHERE "developers_projects"."project_id" = ? GROUP BY developers.salary HAVING SUM(salary) > 10000
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:286:in `sqlanywhere_error'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:281:in `sqlanywhere_error_test'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:533:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:462:in `select'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:39:in `block in find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:38:in `find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:568:in `exec_queries'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `block in load'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `load'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:197:in `to_a'
    /home/chris/Documents/rails/activerecord/lib/active_record/associations/collection_association.rb:401:in `find_target'
    /home/chris/Documents/rails/activerecord/lib/active_record/associations/collection_association.rb:344:in `load_target'
    /home/chris/Documents/rails/activerecord/lib/active_record/associations/collection_association.rb:255:in `size'
    /home/chris/Documents/rails/activerecord/lib/active_record/associations/collection_proxy.rb:695:in `size'
    /home/chris/Documents/rails/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb:710:in `test_find_scoped_grouped_having'

 20) Failure:
test_clearing_updates_counter_cache_when_inverse_counter_cache_is_a_symbol_with_dependent_destroy(HasManyAssociationsTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/has_many_associations_test.rb:847]:
"car.reload.engines_count" didn't change by -1.
Expected: 0
  Actual: -1

 21) Failure:
test_transaction_when_deleting_persisted(HasManyAssociationsTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/has_many_associations_test.rb:806]:
--- expected
+++ actual
@@ -1 +1 @@
-[#<Client id: 109, type: "Client", firm_id: nil, firm_name: nil, name: "Good", client_of: 1, rating: 1, account_id: nil, description: "">, #<Client id: 110, type: "Client", firm_id: nil, firm_name: nil, name: "Bad", client_of: 1, rating: 1, account_id: nil, description: "">]
+#<ActiveRecord::Associations::CollectionProxy [#<Client id: 110, type: "Client", firm_id: nil, firm_name: nil, name: "Bad", client_of: 1, rating: 1, account_id: nil, description: "">]>


 22) Failure:
test_transactions_when_replacing_on_persisted(HasManyAssociationsTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/has_many_associations_test.rb:1210]:
--- expected
+++ actual
@@ -1 +1 @@
-[#<Client id: 112, type: "Client", firm_id: nil, firm_name: nil, name: "Good", client_of: 1, rating: 1, account_id: nil, description: "">]
+#<ActiveRecord::Associations::CollectionProxy []>


 23) Failure:
test_add_table_with_decimals(MigrationTest) [/home/chris/Documents/rails/activerecord/test/cases/migration_test.rb:166]:
Expected #<BigDecimal:b64dce0,'0.2718282E1',18(18)> to be a kind of Fixnum, not BigDecimal.

 24) Error:
test_associations_should_work_when_model_has_no_connection(MultipleDbTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionNotEstablished: ActiveRecord::ConnectionNotEstablished: SELECT TOP (1) "colleges".* FROM "colleges"  ORDER BY "colleges"."id" ASC
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_handling.rb:75:in `connection_pool'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_handling.rb:71:in `connection_config'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:625:in `native_type_to_ruby_type'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:589:in `block (2 levels) in exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:587:in `each'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:587:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:462:in `select'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:39:in `block in find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:38:in `find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:568:in `exec_queries'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `block in load'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `load'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:197:in `to_a'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation/finder_methods.rb:310:in `find_first'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation/finder_methods.rb:90:in `first'
    /home/chris/.rvm/gems/ruby-1.9.3-p286@rails/bundler/gems/activerecord-deprecated_finders-dd99c375c44b/lib/active_record/deprecated_finders/relation.rb:130:in `first'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:4:in `first'
    /home/chris/Documents/rails/activerecord/test/cases/multiple_db_test.rb:101:in `block in test_associations_should_work_when_model_has_no_connection'
    /home/chris/Documents/rails/activesupport/lib/active_support/test_case.rb:74:in `assert_nothing_raised'
    /home/chris/Documents/rails/activerecord/test/cases/multiple_db_test.rb:100:in `test_associations_should_work_when_model_has_no_connection'

 25) Failure:
test_distinct_has_many_through_a_has_many_through_association_on_source_reflection(NestedThroughAssociationsTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/nested_through_associations_test.rb:388]:
--- expected
+++ actual
@@ -1 +1 @@
-[#<Tag id: 1, name: "General", taggings_count: 0>]
+#<ActiveRecord::Associations::CollectionProxy [#<Tag id: 1, name: "General", taggings_count: 0>, #<Tag id: 1, name: "General", taggings_count: 0>]>


 26) Failure:
test_distinct_has_many_through_a_has_many_through_association_on_through_reflection(NestedThroughAssociationsTest) [/home/chris/Documents/rails/activerecord/test/cases/associations/nested_through_associations_test.rb:393]:
--- expected
+++ actual
@@ -1 +1 @@
-[#<Subscriber nick: "alterself", name: "Luke Holden", books_count: 0>, #<Subscriber nick: "webster132", name: "David Heinemeier Hansson", books_count: 0>]
+#<ActiveRecord::Relation [#<Subscriber nick: "alterself", name: "Luke Holden", books_count: 0>, #<Subscriber nick: "webster132", name: "David Heinemeier Hansson", books_count: 0>, #<Subscriber nick: "webster132", name: "David Heinemeier Hansson", books_count: 0>]>


 27) Failure:
test_update_all_doesnt_ignore_order(PersistencesTest) [/home/chris/Documents/rails/activerecord/test/cases/persistence_test.rb:45]:
Failed assertion, no message given.

 28) Failure:
test_cache_does_not_wrap_string_results_in_arrays(QueryCacheTest) [/home/chris/Documents/rails/activerecord/test/cases/query_cache_test.rb:175]:
Expected 2 to be an instance of String, not Fixnum.

 29) Error:
test_size_with_zero_limit(RelationTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionAdapters::SQLAnywhereException: Statement's size limit is invalid: SELECT TOP (0) "posts".* FROM "posts" 
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:286:in `sqlanywhere_error'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:281:in `sqlanywhere_error_test'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:533:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:462:in `select'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:24:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:39:in `block in find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/querying.rb:38:in `find_by_sql'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:568:in `exec_queries'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `block in load'
    /home/chris/Documents/rails/activerecord/lib/active_record/explain.rb:35:in `logging_query_plan'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:459:in `load'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:197:in `to_a'
    /home/chris/Documents/rails/activerecord/test/cases/relations_test.rb:816:in `test_size_with_zero_limit'

 30) Error:
test_update_all_with_joins_and_limit(RelationTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionAdapters::SQLAnywhereException: The result returned is non-deterministic: UPDATE "comments" SET "post_id" = 2 WHERE "comments"."id" IN (SELECT TOP (1) "comments"."id" FROM "comments" INNER JOIN "posts" ON "posts"."id" = "comments"."post_id" WHERE "posts"."id" = 1)
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:286:in `sqlanywhere_error'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:281:in `sqlanywhere_error_test'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:569:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:611:in `exec_delete'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:102:in `update'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `update'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:287:in `update_all'
    /home/chris/.rvm/gems/ruby-1.9.3-p286@rails/bundler/gems/activerecord-deprecated_finders-dd99c375c44b/lib/active_record/deprecated_finders/relation.rb:55:in `update_all_with_deprecated_options'
    /home/chris/Documents/rails/activerecord/test/cases/relations_test.rb:1214:in `test_update_all_with_joins_and_limit'

 31) Error:
test_update_all_with_joins_and_offset(RelationTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionAdapters::SQLAnywhereException: The result returned is non-deterministic: UPDATE "comments" SET "post_id" = 2 WHERE "comments"."id" IN (SELECT TOP (2147483647) START AT (2) "comments"."id" FROM "comments" INNER JOIN "posts" ON "posts"."id" = "comments"."post_id" WHERE "posts"."id" = 1)
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:286:in `sqlanywhere_error'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:281:in `sqlanywhere_error_test'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:569:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:611:in `exec_delete'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:102:in `update'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `update'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:287:in `update_all'
    /home/chris/.rvm/gems/ruby-1.9.3-p286@rails/bundler/gems/activerecord-deprecated_finders-dd99c375c44b/lib/active_record/deprecated_finders/relation.rb:55:in `update_all_with_deprecated_options'
    /home/chris/Documents/rails/activerecord/test/cases/relations_test.rb:1229:in `test_update_all_with_joins_and_offset'

 32) Error:
test_validate_uniqueness_with_limit_and_utf8(UniquenessValidationTest):
ActiveRecord::StatementInvalid: ActiveRecord::ConnectionAdapters::SQLAnywhereException: Right truncation of string data: INSERT INTO "events" ("title") VALUES (?)
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:286:in `sqlanywhere_error'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:281:in `sqlanywhere_error_test'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:569:in `block in exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
    /home/chris/Documents/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
    /home/chris/Documents/activerecord-sqlanywhere-adapter/lib/active_record/connection_adapters/sqlanywhere_adapter.rb:531:in `exec_query'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:69:in `exec_insert'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:96:in `insert'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `insert'
    /home/chris/Documents/rails/activerecord/lib/active_record/relation.rb:68:in `insert'
    /home/chris/Documents/rails/activerecord/lib/active_record/persistence.rb:393:in `create'
    /home/chris/Documents/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:79:in `create'
    /home/chris/Documents/rails/activerecord/lib/active_record/callbacks.rb:303:in `block in create'
    /home/chris/Documents/rails/activesupport/lib/active_support/callbacks.rb:344:in `_run__592644913770747832__create__callbacks'
    /home/chris/Documents/rails/activesupport/lib/active_support/callbacks.rb:77:in `run_callbacks'
    /home/chris/Documents/rails/activerecord/lib/active_record/callbacks.rb:303:in `create'
    /home/chris/Documents/rails/activerecord/lib/active_record/timestamp.rb:57:in `create'
    /home/chris/Documents/rails/activerecord/lib/active_record/persistence.rb:374:in `create_or_update'
    /home/chris/Documents/rails/activerecord/lib/active_record/callbacks.rb:299:in `block in create_or_update'
    /home/chris/Documents/rails/activesupport/lib/active_support/callbacks.rb:344:in `_run__592644913770747832__save__callbacks'
    /home/chris/Documents/rails/activesupport/lib/active_support/callbacks.rb:77:in `run_callbacks'
    /home/chris/Documents/rails/activerecord/lib/active_record/callbacks.rb:299:in `create_or_update'
    /home/chris/Documents/rails/activerecord/lib/active_record/persistence.rb:76:in `save'
    /home/chris/Documents/rails/activerecord/lib/active_record/validations.rb:51:in `save'
    /home/chris/Documents/rails/activerecord/lib/active_record/attribute_methods/dirty.rb:33:in `save'
    /home/chris/Documents/rails/activerecord/lib/active_record/transactions.rb:259:in `block (2 levels) in save'
    /home/chris/Documents/rails/activerecord/lib/active_record/transactions.rb:312:in `block in with_transaction_returning_status'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `block in transaction'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:209:in `within_new_transaction'
    /home/chris/Documents/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
    /home/chris/Documents/rails/activerecord/lib/active_record/transactions.rb:208:in `transaction'
    /home/chris/Documents/rails/activerecord/lib/active_record/transactions.rb:309:in `with_transaction_returning_status'
    /home/chris/Documents/rails/activerecord/lib/active_record/transactions.rb:259:in `block in save'
    /home/chris/Documents/rails/activerecord/lib/active_record/transactions.rb:270:in `rollback_active_record_state!'
    /home/chris/Documents/rails/activerecord/lib/active_record/transactions.rb:258:in `save'
    /home/chris/Documents/rails/activerecord/lib/active_record/persistence.rb:37:in `create'
    /home/chris/Documents/rails/activerecord/test/cases/validations/uniqueness_validation_test.rb:310:in `test_validate_uniqueness_with_limit_and_utf8'

3392 tests, 9666 assertions, 24 failures, 8 errors, 33 skips
